{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tracker Details PDF</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            color: #333;
            line-height: 1.6;
        }
        
        h1, h2, h3 {
            color: #52796f;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .barcode {
            margin-top: 20px;
            text-align: center;
        }
        .footer {
            position: fixed;
            bottom: 20px;
            width: 100%;
            text-align: center;
            font-size: 12px;
            color: #aaa;
        }
    </style>
</head>
<body>
    <h1 class="text-success">{{ tracker_type|title }} Tracker Report</h1>
    
    <h2 class="text-success">Tracker Information</h2>
    <p><strong>Tracker Code:</strong> {{ tracker.tracker_code|default:"-" }}</p>
    <p><strong>Barcode:</strong></p>
    <div class="barcode">
        {% if tracker.barcode_image %}
        <img src="{% url 'tracker_barcode_image' tracker.tracker_code %}" alt="Tracker Barcode">
        {% else %}
            No Barcode
        {% endif %}
    </div>

    {% if tracker_type == 'egg' %}
        <h2 class="text-success">Egg Details</h2>
        <p><strong>Egg Batch Number:</strong> {{ egg.batchnumber|default:"-" }}</p>
        <h3 class="text-success">Tracking Progress</h3>
        <p><strong>Egg Setting:</strong> {% if egg_setting %}Set on {{ egg_setting.created|date:"Y-m-d H:i" }}{% else %}Not set{% endif %}</p>
        <p><strong>Incubation:</strong> {% if incubation %}Started on {{ incubation.created|date:"Y-m-d H:i" }}{% else %}Not incubated{% endif %}</p>
        <p><strong>Candling:</strong> {% if candling %}Candled on {{ candling.candled_date|date:"Y-m-d H:i" }}{% else %}Not candled{% endif %}</p>
        <p><strong>Hatching:</strong> {% if hatching %}Hatched on {{ hatching.created|date:"Y-m-d H:i" }}{% else %}Not hatched{% endif %}</p>
        <h3 class="text-success">Chicks Produced</h3>
        <ul>
            {% for chick in chicks %}
                <li>Chick Batch Number: {{ chick.batchnumber|default:"-" }}</li>
            {% empty %}
                <li>No chicks produced.</li>
            {% endfor %}
        </ul>
    {% elif tracker_type == 'chick' %}
        <h2 class="text-success">Chick Details</h2>
        <p><strong>Chick Batch Number:</strong> {{ chick.batchnumber|default:"-" }}</p>
        <h3 class="text-success">Egg Information</h3>
        <p><strong>Egg Batch Number:</strong> {% if egg %}{{ egg.batchnumber|default:"-" }}{% else %}-{% endif %}</p>
        <p><strong>Egg Setting:</strong> {% if egg_setting %}Set on {{ egg_setting.created|date:"Y-m-d H:i" }}{% else %}Not set{% endif %}</p>
        <p><strong>Incubation:</strong> {% if incubation %}Started on {{ incubation.created|date:"Y-m-d H:i" }}{% else %}Not incubated{% endif %}</p>
        <p><strong>Candling:</strong> {% if candling %}Candled on {{ candling.candled_date|date:"Y-m-d H:i" }}{% else %}Not candled{% endif %}</p>
        <p><strong>Hatching:</strong> {% if hatching %}Hatched on {{ hatching.created|date:"Y-m-d H:i" }}{% else %}Not hatched{% endif %}</p>
    {% endif %}

    <div class="footer">
        &copy; {{ current_year }} Hatchtrack. All rights reserved.
    </div>
</body>
</html>
